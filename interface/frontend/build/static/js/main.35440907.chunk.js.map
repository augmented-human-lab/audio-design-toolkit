{"version":3,"sources":["MyComponent.jsx","index.tsx"],"names":["streamlitSetComponentValue","func","timer","timeout","arguments","length","undefined","_len","args","Array","_key","clearTimeout","setTimeout","apply","debounce","e","window","dataLayer","console","log","push","gtag","id","currentValue","Streamlit","setComponentValue","MyComponent","renderData","useRenderData","lowVal","highVal","value","size","type","label","name","_useState","useState","initY","currentKnob","_useState2","_slicedToArray","knobInUse","setKnobInUse","scaler","initialSum","Math","floor","initialKnobY","concat","imgFile","_useState3","knobY","_useState4","state","setState","theme","resetKnobInUse","handleMouseMove","useCallback","oldState","_objectSpread","pageY","document","body","clientHeight","round","Number","EPSILON","max","min","sum","newY","useEffect","addEventListener","removeEventListener","React","createElement","Fragment","style","width","display","flexDirection","alignItems","marginBottom","textAlign","margin","fontSize","fontWeight","fontFamily","font","color","textColor","overflow","height","userSelect","alt","draggable","transform","src","onMouseDown","onTouchStart","ReactDOM","render","StreamlitProvider","getElementById"],"mappings":"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","file":"static/js/main.35440907.chunk.js","sourcesContent":["import { Streamlit } from \"streamlit-component-lib\"\r\nimport { useRenderData } from \"streamlit-component-lib-react-hooks\"\r\nimport React, { useState, useEffect, useCallback } from \"react\"\r\n\r\nconst debounce = (func, timeout = 1000) => {\r\n  let timer;\r\n  return (...args) => {\r\n    clearTimeout(timer);\r\n    timer = setTimeout(() => {\r\n      func.apply(this, args);\r\n    }, timeout);\r\n  };\r\n};\r\n\r\nconst streamlitSetComponentValue = debounce(e => {\r\n  window.dataLayer = window.dataLayer || [];\r\n  function gtag() {\r\n    console.log(arguments)\r\n    window.dataLayer.push(arguments)\r\n  }\r\n  gtag('event', 'parameter_change', {\r\n    'app_name': 'myAppName',\r\n    'screen_name': 'Home',\r\n    'elementId': e.id,\r\n    'value': e.currentValue\r\n  });\r\n  return Streamlit.setComponentValue(e.currentValue)\r\n}, 1000)\r\n/**\r\n * This is a React-based component template with functional component and hooks.\r\n */\r\nconst MyComponent = () => {\r\n  // let id = \"knob1\"\r\n  // let lowVal = 1\r\n  // let highVal = 100\r\n  // let value = 8\r\n  // let size = \"medium\"\r\n  // let type = \"Oscar\"\r\n  // let label = true\r\n  // let name = \"Default\"\r\n\r\n  let renderData = useRenderData()\r\n  let id = renderData.args[\"id\"]\r\n  let lowVal = renderData.args[\"lowVal\"]\r\n  let highVal = renderData.args[\"highVal\"]\r\n  let value = renderData.args[\"value\"]\r\n  let size = renderData.args[\"size\"]\r\n  let type = renderData.args[\"type\"]\r\n  let label = renderData.args[\"label\"]\r\n  let name = renderData.args[\"name\"]\r\n\r\n  const [knobInUse, setKnobInUse] = useState({\r\n    id: \"\",\r\n    initY: 0,\r\n    currentKnob: {}\r\n  })\r\n\r\n  let currentValue;\r\n  if (value > highVal) {\r\n    currentValue = highVal;\r\n  } else if (value < lowVal) {\r\n    currentValue = lowVal;\r\n  } else {\r\n    currentValue = value;\r\n  }\r\n  const scaler = 100 / (highVal - lowVal);\r\n\r\n  if (size === \"xlarge\") {\r\n    size = 128;\r\n  } else if (size === \"large\") {\r\n    size = 85;\r\n  } else if (size === \"medium\") {\r\n    size = 50;\r\n  } else if (size === \"small\") {\r\n    size = 40;\r\n  } else {\r\n    size = 30;\r\n  }\r\n\r\n  let initialSum =\r\n    Math.floor(((value - lowVal) * scaler) / 2) * size;\r\n\r\n  let initialKnobY = `translateY(-${initialSum}px)`;\r\n\r\n  const imgFile = `${type}/${type}_${size}.png`;\r\n\r\n  const [state, setState] = useState({\r\n    id,\r\n    lowVal,\r\n    highVal,\r\n    currentValue,\r\n    scaler,\r\n    type,\r\n    label,\r\n    size,\r\n    imgFile,\r\n    knobY: initialKnobY,\r\n    name\r\n  })\r\n\r\n  const theme = renderData.theme\r\n  // const theme = {\r\n  //   font: 'Serif',\r\n  //   textColor: 'black'\r\n  // }\r\n\r\n  function resetKnobInUse() {\r\n    setKnobInUse({ id: \"\", initY: 0, value: 0, currentKnob: null })\r\n  }\r\n\r\n  const handleMouseDown = e => {\r\n    setKnobInUse({\r\n      id: id,\r\n      initY: e.pageY,\r\n      value: currentValue, //storing the value\r\n      currentKnob: state //storing the reference\r\n    })\r\n  }\r\n\r\n  const handleTouchStart = e => {\r\n    setKnobInUse({\r\n      id: id,\r\n      initY: e.pageY,\r\n      value: currentValue, //storing the value\r\n      currentKnob: state //storing the reference\r\n    })\r\n  }\r\n\r\n  const handleMouseMove = useCallback(function (e) {\r\n    if (knobInUse.id !== \"\") {\r\n      const oldState = { ...state };\r\n      //freeze mouse drag activity if user hits top or bottom of the page\r\n      if (e.pageY <= 10 || e.pageY >= document.body.clientHeight - 10) {\r\n        setKnobInUse({ id: \"\", initY: 0, currentKnob: null })\r\n        return;\r\n      } else {\r\n        //calculate new knob value\r\n        oldState.currentValue =\r\n          Math.round((oldState.currentValue =\r\n            knobInUse.value +\r\n            ((knobInUse.initY - e.pageY) * 1.7) /\r\n            knobInUse.currentKnob.scaler + Number.EPSILON) * 100) / 100\r\n\r\n        //use max/min variables for easier reading\r\n        let max = knobInUse.currentKnob.highVal,\r\n          min = knobInUse.currentKnob.lowVal;\r\n\r\n        //ensure the know value does not exceed max and/or minimum values\r\n        if (oldState.currentValue > max) {\r\n          oldState.currentValue = max;\r\n        } else if (oldState.currentValue < min) {\r\n          oldState.currentValue = min;\r\n        }\r\n      }\r\n\r\n      //update label (if user wants labels)\r\n      if (knobInUse.currentKnob.label !== false) {\r\n        oldState.label = oldState.currentValue\r\n      }\r\n\r\n      //change the image position to match\r\n      let sum =\r\n        (Math.floor(\r\n          ((oldState.currentValue - knobInUse.currentKnob.lowVal) *\r\n            knobInUse.currentKnob.scaler) /\r\n          2\r\n        ) +\r\n          0) *\r\n        knobInUse.currentKnob.size;\r\n\r\n      let newY = `translateY(-${sum}px)`;\r\n      //access to the image goes: container div > image wrapper div > image tag\r\n      oldState.knobY = newY\r\n      setState(oldState)\r\n      streamlitSetComponentValue(oldState)\r\n    }\r\n  }, [state, knobInUse])\r\n\r\n  useEffect(() => {\r\n    document.body.addEventListener(\"mousemove\", handleMouseMove);\r\n    document.body.addEventListener(\"touchmove\", handleMouseMove);\r\n    document.body.addEventListener(\"mouseup\", resetKnobInUse);\r\n    document.body.addEventListener(\"touchend\", resetKnobInUse);\r\n    return () => {\r\n      document.body.removeEventListener('mousemove', handleMouseMove);\r\n      document.body.removeEventListener('touchmove', handleMouseMove);\r\n      document.body.removeEventListener(\"mouseup\", resetKnobInUse);\r\n      document.body.removeEventListener(\"touchend\", resetKnobInUse);\r\n    }\r\n  }, [handleMouseMove])\r\n\r\n  return (\r\n    <>\r\n      <div id={state.id} style={{ width: state.size * 2.5, display: 'flex', flexDirection: 'column', alignItems: 'center', marginBottom: 16 }}>\r\n        <div style={{ textAlign: 'center', width: '100%', margin: '0px auto', marginBottom: 24, fontSize: '18px', fontWeight: 'bold', fontFamily: theme.font, color: theme.textColor }}>{state.name}</div>\r\n        <div style={{ overflow: 'hidden', height: '50px', userSelect: 'none' }}>\r\n          <img\r\n            alt={state.id}\r\n            draggable={false}\r\n            style={{ transform: state.knobY }}\r\n            src={\"https://raw.githubusercontent.com/ColinBD/JSAudioKnobs/master/docs/knobs/\" + state.imgFile}\r\n            onMouseDown={handleMouseDown}\r\n            onTouchStart={handleTouchStart}\r\n          />\r\n        </div>\r\n        <div style={{ display: 'flex', width: '70%' }}>\r\n          <div style={{ textAlign: 'center', width: '100%', margin: '-10px auto', fontSize: '14px', fontFamily: theme.font, color: theme.textColor }}>{state.lowVal}</div>\r\n          <div style={{ textAlign: 'center', width: '100%', margin: '10px auto', fontSize: '16px', fontFamily: theme.font, fontWeight: 'bold', color: theme.textColor }}>{state.currentValue}</div>\r\n          <div style={{ textAlign: 'center', width: '100%', margin: '-10px auto', fontSize: '14px', fontFamily: theme.font, color: theme.textColor }}>{state.highVal}</div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default MyComponent\r\n","import React from \"react\"\r\nimport ReactDOM from \"react-dom\"\r\nimport { StreamlitProvider } from \"streamlit-component-lib-react-hooks\"\r\nimport MyComponent from \"./MyComponent\"\r\n\r\nReactDOM.render(\r\n  <StreamlitProvider>\r\n    <MyComponent />\r\n  </StreamlitProvider>\r\n  ,\r\n  document.getElementById(\"root\")\r\n)\r\n"],"sourceRoot":""}