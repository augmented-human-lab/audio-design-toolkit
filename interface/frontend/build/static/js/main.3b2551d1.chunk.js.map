{"version":3,"sources":["MyComponent.jsx","index.tsx"],"names":["streamlitSetComponentValue","func","timer","timeout","arguments","length","undefined","_len","args","Array","_key","clearTimeout","setTimeout","apply","debounce","Streamlit","setComponentValue","MyComponent","currentValue","renderData","useRenderData","id","lowVal","highVal","value","size","type","label","name","_useState","useState","initY","currentKnob","_useState2","_slicedToArray","knobInUse","setKnobInUse","scaler","initialSum","Math","floor","initialKnobY","concat","imgFile","_useState3","knobY","_useState4","state","setState","theme","resetKnobInUse","handleMouseMove","useCallback","e","oldState","_objectSpread","pageY","document","body","clientHeight","round","Number","EPSILON","max","min","sum","newY","useEffect","addEventListener","removeEventListener","React","createElement","Fragment","style","width","display","flexDirection","alignItems","marginBottom","textAlign","margin","fontSize","fontWeight","fontFamily","font","color","textColor","overflow","height","userSelect","alt","draggable","transform","src","onMouseDown","onTouchStart","ReactDOM","render","StreamlitProvider","getElementById"],"mappings":"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","file":"static/js/main.3b2551d1.chunk.js","sourcesContent":["import { Streamlit } from \"streamlit-component-lib\"\r\nimport { useRenderData } from \"streamlit-component-lib-react-hooks\"\r\nimport React, { useState, useEffect, useCallback } from \"react\"\r\n\r\nconst debounce = (func, timeout = 1000) => {\r\n  let timer;\r\n  return (...args) => {\r\n    clearTimeout(timer);\r\n    timer = setTimeout(() => {\r\n      func.apply(this, args);\r\n    }, timeout);\r\n  };\r\n};\r\n\r\nconst streamlitSetComponentValue = debounce(Streamlit.setComponentValue, 1000)\r\n/**\r\n * This is a React-based component template with functional component and hooks.\r\n */\r\nconst MyComponent = () => {\r\n  // let id = \"knob1\"\r\n  // let lowVal = 1\r\n  // let highVal = 100\r\n  // let value = 8\r\n  // let size = \"medium\"\r\n  // let type = \"Oscar\"\r\n  // let label = true\r\n  // let name = \"Default\"\r\n\r\n  let renderData = useRenderData()\r\n  let id = renderData.args[\"id\"]\r\n  let lowVal = renderData.args[\"lowVal\"]\r\n  let highVal = renderData.args[\"highVal\"]\r\n  let value = renderData.args[\"value\"]\r\n  let size = renderData.args[\"size\"]\r\n  let type = renderData.args[\"type\"]\r\n  let label = renderData.args[\"label\"]\r\n  let name = renderData.args[\"name\"]\r\n\r\n  const [knobInUse, setKnobInUse] = useState({\r\n    id: \"\",\r\n    initY: 0,\r\n    currentKnob: {}\r\n  })\r\n\r\n  let currentValue;\r\n  if (value > highVal) {\r\n    currentValue = highVal;\r\n  } else if (value < lowVal) {\r\n    currentValue = lowVal;\r\n  } else {\r\n    currentValue = value;\r\n  }\r\n  const scaler = 100 / (highVal - lowVal);\r\n\r\n  if (size === \"xlarge\") {\r\n    size = 128;\r\n  } else if (size === \"large\") {\r\n    size = 85;\r\n  } else if (size === \"medium\") {\r\n    size = 50;\r\n  } else if (size === \"small\") {\r\n    size = 40;\r\n  } else {\r\n    size = 30;\r\n  }\r\n\r\n  let initialSum =\r\n    Math.floor(((value - lowVal) * scaler) / 2) * size;\r\n\r\n  let initialKnobY = `translateY(-${initialSum}px)`;\r\n\r\n  const imgFile = `${type}/${type}_${size}.png`;\r\n\r\n  const [state, setState] = useState({\r\n    id,\r\n    lowVal,\r\n    highVal,\r\n    currentValue,\r\n    scaler,\r\n    type,\r\n    label,\r\n    size,\r\n    imgFile,\r\n    knobY: initialKnobY,\r\n    name\r\n  })\r\n\r\n  const theme = renderData.theme\r\n  // const theme = {\r\n  //   font: 'Serif',\r\n  //   textColor: 'black'\r\n  // }\r\n\r\n  function resetKnobInUse() {\r\n    setKnobInUse({ id: \"\", initY: 0, value: 0, currentKnob: null })\r\n  }\r\n\r\n  const handleMouseDown = e => {\r\n    setKnobInUse({\r\n      id: id,\r\n      initY: e.pageY,\r\n      value: currentValue, //storing the value\r\n      currentKnob: state //storing the reference\r\n    })\r\n  }\r\n\r\n  const handleTouchStart = e => {\r\n    setKnobInUse({\r\n      id: id,\r\n      initY: e.pageY,\r\n      value: currentValue, //storing the value\r\n      currentKnob: state //storing the reference\r\n    })\r\n  }\r\n\r\n  const handleMouseMove = useCallback(function (e) {\r\n    if (knobInUse.id !== \"\") {\r\n      const oldState = { ...state };\r\n      //freeze mouse drag activity if user hits top or bottom of the page\r\n      if (e.pageY <= 10 || e.pageY >= document.body.clientHeight - 10) {\r\n        setKnobInUse({ id: \"\", initY: 0, currentKnob: null })\r\n        return;\r\n      } else {\r\n        //calculate new knob value\r\n        oldState.currentValue =\r\n          Math.round((oldState.currentValue =\r\n            knobInUse.value +\r\n            ((knobInUse.initY - e.pageY) * 1.7) /\r\n            knobInUse.currentKnob.scaler + Number.EPSILON) * 100) / 100\r\n\r\n        //use max/min variables for easier reading\r\n        let max = knobInUse.currentKnob.highVal,\r\n          min = knobInUse.currentKnob.lowVal;\r\n\r\n        //ensure the know value does not exceed max and/or minimum values\r\n        if (oldState.currentValue > max) {\r\n          oldState.currentValue = max;\r\n        } else if (oldState.currentValue < min) {\r\n          oldState.currentValue = min;\r\n        }\r\n      }\r\n\r\n      //update label (if user wants labels)\r\n      if (knobInUse.currentKnob.label !== false) {\r\n        oldState.label = oldState.currentValue\r\n      }\r\n\r\n      //change the image position to match\r\n      let sum =\r\n        (Math.floor(\r\n          ((oldState.currentValue - knobInUse.currentKnob.lowVal) *\r\n            knobInUse.currentKnob.scaler) /\r\n          2\r\n        ) +\r\n          0) *\r\n        knobInUse.currentKnob.size;\r\n\r\n      let newY = `translateY(-${sum}px)`;\r\n      //access to the image goes: container div > image wrapper div > image tag\r\n      oldState.knobY = newY\r\n      setState(oldState)\r\n      streamlitSetComponentValue(oldState.currentValue)\r\n    }\r\n  }, [state, knobInUse])\r\n\r\n  useEffect(() => {\r\n    document.body.addEventListener(\"mousemove\", handleMouseMove);\r\n    document.body.addEventListener(\"touchmove\", handleMouseMove);\r\n    document.body.addEventListener(\"mouseup\", resetKnobInUse);\r\n    document.body.addEventListener(\"touchend\", resetKnobInUse);\r\n    return () => {\r\n      document.body.removeEventListener('mousemove', handleMouseMove);\r\n      document.body.removeEventListener('touchmove', handleMouseMove);\r\n      document.body.removeEventListener(\"mouseup\", resetKnobInUse);\r\n      document.body.removeEventListener(\"touchend\", resetKnobInUse);\r\n    }\r\n  }, [handleMouseMove])\r\n\r\n  return (\r\n    <>\r\n      <div id={state.id} style={{ width: state.size * 2.5, display: 'flex', flexDirection: 'column', alignItems: 'center', marginBottom: 16 }}>\r\n        <div style={{ textAlign: 'center', width: '100%', margin: '0px auto', marginBottom: 24, fontSize: '18px', fontWeight: 'bold', fontFamily: theme.font, color: theme.textColor }}>{state.name}</div>\r\n        <div style={{ overflow: 'hidden', height: '50px', userSelect: 'none' }}>\r\n          <img\r\n            alt={state.id}\r\n            draggable={false}\r\n            style={{ transform: state.knobY }}\r\n            src={\"https://raw.githubusercontent.com/ColinBD/JSAudioKnobs/master/docs/knobs/\" + state.imgFile}\r\n            onMouseDown={handleMouseDown}\r\n            onTouchStart={handleTouchStart}\r\n          />\r\n        </div>\r\n        <div style={{ display: 'flex', width: '70%' }}>\r\n          <div style={{ textAlign: 'center', width: '100%', margin: '-10px auto', fontSize: '14px', fontFamily: theme.font, color: theme.textColor }}>{state.lowVal}</div>\r\n          <div style={{ textAlign: 'center', width: '100%', margin: '10px auto', fontSize: '16px', fontFamily: theme.font, fontWeight: 'bold', color: theme.textColor }}>{state.currentValue}</div>\r\n          <div style={{ textAlign: 'center', width: '100%', margin: '-10px auto', fontSize: '14px', fontFamily: theme.font, color: theme.textColor }}>{state.highVal}</div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default MyComponent\r\n","import React from \"react\"\r\nimport ReactDOM from \"react-dom\"\r\nimport { StreamlitProvider } from \"streamlit-component-lib-react-hooks\"\r\nimport MyComponent from \"./MyComponent\"\r\n\r\nReactDOM.render(\r\n  <StreamlitProvider>\r\n    <MyComponent />\r\n  </StreamlitProvider>\r\n  ,\r\n  document.getElementById(\"root\")\r\n)\r\n"],"sourceRoot":""}